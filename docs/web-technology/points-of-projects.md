# 项目功能点

> 介绍项目里实现的一些功能点以及亮点

## 大量请求数据报表

**背景**：接口性能瓶颈，请求时间较长，前端拿到了 1w 条数据，需要做成报表的形式。_😔 本身是一种不算优雅的方式_

**实现功能**：我将数据存储在本地，采用表格方式展示数据，优化的核心点在于**尽最大可能减少请求次数！**

**实现原理**

-   如果获取到所有数据

    -   分页排序筛选都不需要请求后端

-   如果未获取到所有数据

    -   **排序、筛选** 都要发起请求，拿到结果并刷新数据

    -   **分页**每次要判断是否已有该页数据（因为数据中间可能存在断层，稀疏数组），若没有则请求后端**补数据**到稀疏列表里

一些思考：把这层逻辑抽象出来，如果后端最终解决了瓶颈问题，可以直接把这层逻辑给去掉，迅速回复成普通的报表

## 图片信息标注

素材库的图片，将其引入到 canvas 中可以进行打点操作

通过创建标签-表单操作，canvas 中生成初始点位坐标和对应文字气泡框

修改标签-表单操作，文字气泡内容随之改变

修改坐标-点位可以直接拖动，涉及到边界检测和碰撞检测（外接矩形判定法）

## 切片上传/断点续传

1. 先判断文件大小，是否需要切片上传？？？切片会多出更多请求次数

2. 文件上传到本地，md5 将文件 hash 化，将 hash 值作为文件的新名字

3. 根据 hash 值请求获取到该文件已经上传过的切片列表

4. 制定切片规则，固定大小 > 固定数量， 将文件切片

5. 轮询切片列表，只上传未上传过的切片

6. 根据切片上传成功数量管控上传进度条

7. 若有切片上传失败，直接报错，提示重新上传

8. 再次上传可以保留之前上传的进度

## 东方私行移动 web 页面切换逻辑

-   动画逻辑

    -   实现功能：左移动画：进入下一页； 右移动画：返回 n 页； 无动画：from / to 搜索页

    -   实现原理：维护一个路由列表，监听路由在回调中判断页面切换动画

    -   性能优化：对页面使用`translate3d()`创建图层并调用 GPU 绘制动画。⚠ 频繁调用 GPU 有时候性能不强的终端反而会掉帧

-   缓存逻辑

    -   背景：基金详情页中可以跳转到基金经理、公司、申购等各种信息页，每次返回时需记住之前的页面状态和位置

    -   实现功能：从列表页 to 详情页时会缓存详情页；从详情页 back 列表页时要移除缓存，因为下一次查看的详情页需要刷新

    -   实现原理：使用`<keep-alive>`组件实现缓存页面，维护一个缓存列表，通过路由勾子函数做逻辑判断
